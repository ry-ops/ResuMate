<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industry Benchmarking - ResuMate</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/benchmarking.css">
</head>
<body id="main-content" tabindex="-1">
    <div class="benchmarking-container">
        <!-- Header -->
        <div class="benchmarking-header">
            <h1>Industry Benchmarking</h1>
            <p>See how your resume compares to industry standards and get personalized recommendations</p>
        </div>

        <!-- Configuration Section -->
        <div class="config-section" id="configSection">
            <div class="comparison-card">
                <h3>Configure Benchmark Analysis</h3>
                <form id="benchmarkForm">
                    <div style="margin-bottom: 1rem;">
                        <label for="industrySelect" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Industry:</label>
                        <select id="industrySelect" style="width: 100%; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 6px;">
                            <option value="">Select Industry</option>
                            <option value="technology">Technology</option>
                            <option value="finance">Finance & Banking</option>
                            <option value="healthcare">Healthcare</option>
                            <option value="marketing">Marketing & Creative</option>
                            <option value="manufacturing">Manufacturing & Operations</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label for="roleSelect" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Target Role:</label>
                        <select id="roleSelect" style="width: 100%; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 6px;">
                            <option value="">Select Role</option>
                        </select>
                    </div>
                    <div class="benchmark-actions">
                        <button type="button" onclick="runBenchmarkDemo()" class="btn-benchmark btn-primary">Run Benchmark Analysis</button>
                        <button type="button" onclick="runSkillsGapDemo()" class="btn-benchmark btn-secondary">Analyze Skills Gap</button>
                        <button type="button" onclick="runCareerPathsDemo()" class="btn-benchmark btn-secondary">Get Career Paths</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Results Container -->
        <div id="resultsContainer" style="display: none;">
            <!-- Score Overview -->
            <div class="score-overview">
                <div class="score-card">
                    <div class="score-value" id="competitivenessScore">--</div>
                    <div class="score-label">Competitiveness Score</div>
                    <div class="score-description">Overall market readiness</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="percentileRank">--</div>
                    <div class="score-label">Percentile Rank</div>
                    <div class="score-description">Compared to peers</div>
                    <div class="percentile-indicator">
                        <div class="percentile-fill" id="percentileFill" style="width: 0%"></div>
                        <div class="percentile-marker" id="percentileMarker" style="left: 0%"></div>
                    </div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="skillsCoverage">--</div>
                    <div class="score-label">Skills Coverage</div>
                    <div class="score-description">Critical skills matched</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="quantificationRate">--</div>
                    <div class="score-label">Quantification Rate</div>
                    <div class="score-description">Achievements with metrics</div>
                </div>
            </div>

            <!-- Strengths & Gaps -->
            <div class="strengths-gaps-section">
                <div class="strengths-card">
                    <h3>Your Strengths</h3>
                    <div id="strengthsList"></div>
                </div>
                <div class="gaps-card">
                    <h3>Areas to Improve</h3>
                    <div id="gapsList"></div>
                </div>
            </div>

            <!-- Skills Analysis -->
            <div class="skills-analysis">
                <h2>Skills Analysis</h2>
                <div class="skills-grid" id="skillsGrid"></div>
            </div>

            <!-- Comparison Charts -->
            <div class="comparison-section">
                <h2>Performance Comparison</h2>
                <div class="comparison-grid" id="comparisonGrid"></div>
            </div>

            <!-- Recommendations -->
            <div class="recommendations-section">
                <h2>Actionable Recommendations</h2>
                <div id="recommendationsList"></div>
            </div>

            <!-- Career Paths -->
            <div class="career-paths-section" id="careerPathsSection" style="display: none;">
                <h2>Career Progression Paths</h2>
                <div id="careerPathsList"></div>
            </div>

            <!-- Skills Gap Details -->
            <div class="skills-gap-section" id="skillsGapSection" style="display: none;">
                <h2>Skills Gap Analysis</h2>
                <div class="gap-summary" id="gapSummary"></div>
                <div id="learningPathsList"></div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" style="display: none; text-align: center; padding: 3rem;">
            <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
            <p style="color: #6b7280;">Analyzing your resume...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/insights/industry-data.js"></script>
    <script src="js/insights/benchmarking.js"></script>
    <script src="js/insights/skills-gap.js"></script>
    <script src="js/insights/recommendations.js"></script>
    <script>
        // Populate role dropdown when industry is selected
        document.getElementById('industrySelect').addEventListener('change', function() {
            const industry = this.value;
            const roleSelect = document.getElementById('roleSelect');
            roleSelect.innerHTML = '<option value="">Select Role</option>';

            if (industry) {
                const roles = IndustryData.getRolesForIndustry(industry);
                roles.forEach(role => {
                    const option = document.createElement('option');
                    option.value = role.id;
                    option.textContent = role.title;
                    roleSelect.appendChild(option);
                });
            }
        });

        // Demo functions
        function runBenchmarkDemo() {
            const industry = document.getElementById('industrySelect').value;
            const role = document.getElementById('roleSelect').value;

            if (!industry || !role) {
                alert('Please select both industry and target role');
                return;
            }

            // Show loading
            document.getElementById('configSection').style.display = 'none';
            document.getElementById('loadingState').style.display = 'block';

            // Simulate analysis
            setTimeout(() => {
                const mockResumeData = {
                    title: 'Software Engineer',
                    experience: [
                        {
                            startDate: '2020-01-01',
                            endDate: '2023-12-01',
                            bullets: [
                                'Developed microservices architecture serving 1M+ users',
                                'Improved system performance by 40%',
                                'Led team of 3 junior developers'
                            ]
                        }
                    ],
                    skills: ['JavaScript', 'Python', 'React', 'Node.js', 'SQL', 'Git', 'Docker']
                };

                const analysis = benchmarkingEngine.analyzeBenchmark(mockResumeData, role, industry);
                displayBenchmarkResults(analysis);

                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('resultsContainer').style.display = 'block';
            }, 2000);
        }

        function runSkillsGapDemo() {
            const industry = document.getElementById('industrySelect').value;
            const role = document.getElementById('roleSelect').value;

            if (!industry || !role) {
                alert('Please select both industry and target role');
                return;
            }

            document.getElementById('configSection').style.display = 'none';
            document.getElementById('loadingState').style.display = 'block';

            setTimeout(() => {
                const currentSkills = ['JavaScript', 'Python', 'React', 'SQL'];
                const gapAnalysis = skillsGapAnalyzer.analyzeGap(currentSkills, role, industry);
                displaySkillsGapResults(gapAnalysis);

                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('resultsContainer').style.display = 'block';
                document.getElementById('skillsGapSection').style.display = 'block';
            }, 2000);
        }

        function runCareerPathsDemo() {
            const industry = document.getElementById('industrySelect').value;
            const role = document.getElementById('roleSelect').value;

            if (!industry || !role) {
                alert('Please select both industry and target role');
                return;
            }

            document.getElementById('configSection').style.display = 'none';
            document.getElementById('loadingState').style.display = 'block';

            setTimeout(() => {
                const background = {
                    currentRole: 'Software Engineer',
                    yearsExperience: 3,
                    skills: ['JavaScript', 'Python', 'React', 'Node.js'],
                    industry: industry,
                    education: "Bachelor's in Computer Science"
                };

                const careerPaths = careerProgressionEngine.generateCareerPaths(background);
                displayCareerPathsResults(careerPaths);

                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('resultsContainer').style.display = 'block';
                document.getElementById('careerPathsSection').style.display = 'block';
            }, 2000);
        }

        function displayBenchmarkResults(analysis) {
            // Update score cards
            document.getElementById('competitivenessScore').textContent = analysis.competitivenessScore;
            document.getElementById('percentileRank').textContent = analysis.percentileRank + 'th';
            document.getElementById('skillsCoverage').textContent =
                Math.round(analysis.skillsAnalysis.criticalSkills.coverage) + '%';
            document.getElementById('quantificationRate').textContent =
                Math.round(analysis.achievementsAnalysis.quantificationRate * 100) + '%';

            // Update percentile indicator
            document.getElementById('percentileFill').style.width = analysis.percentileRank + '%';
            document.getElementById('percentileMarker').style.left = analysis.percentileRank + '%';

            // Display strengths
            const strengthsList = document.getElementById('strengthsList');
            strengthsList.innerHTML = analysis.strengths.map(strength => `
                <div class="strength-item">
                    <div class="strength-icon">‚úì</div>
                    <div>${strength}</div>
                </div>
            `).join('');

            // Display gaps
            const gapsList = document.getElementById('gapsList');
            gapsList.innerHTML = analysis.gaps.map(gap => `
                <div class="gap-item">
                    <div class="gap-icon">!</div>
                    <div>${gap}</div>
                </div>
            `).join('');

            // Display skills analysis
            const skillsGrid = document.getElementById('skillsGrid');
            skillsGrid.innerHTML = `
                <div class="skill-category critical">
                    <h3>Critical Skills</h3>
                    <p style="margin-bottom: 0.5rem; color: #6b7280; font-size: 0.875rem;">
                        ${analysis.skillsAnalysis.criticalSkills.coverage.toFixed(0)}% Coverage
                    </p>
                    <ul class="skill-list">
                        ${analysis.skillsAnalysis.criticalSkills.has.map(s =>
                            `<li class="skill-item">${s}</li>`
                        ).join('')}
                        ${analysis.skillsAnalysis.criticalSkills.missing.map(s =>
                            `<li class="skill-item missing">${s}</li>`
                        ).join('')}
                    </ul>
                </div>
                <div class="skill-category valuable">
                    <h3>Valuable Skills</h3>
                    <p style="margin-bottom: 0.5rem; color: #6b7280; font-size: 0.875rem;">
                        ${analysis.skillsAnalysis.valuableSkills.coverage.toFixed(0)}% Coverage
                    </p>
                    <ul class="skill-list">
                        ${analysis.skillsAnalysis.valuableSkills.has.map(s =>
                            `<li class="skill-item">${s}</li>`
                        ).join('')}
                        ${analysis.skillsAnalysis.valuableSkills.missing.slice(0, 3).map(s =>
                            `<li class="skill-item missing">${s}</li>`
                        ).join('')}
                    </ul>
                </div>
                <div class="skill-category emerging">
                    <h3>Emerging Skills</h3>
                    <p style="margin-bottom: 0.5rem; color: #6b7280; font-size: 0.875rem;">
                        ${analysis.skillsAnalysis.emergingSkills.coverage.toFixed(0)}% Coverage
                    </p>
                    <ul class="skill-list">
                        ${analysis.skillsAnalysis.emergingSkills.has.map(s =>
                            `<li class="skill-item">${s}</li>`
                        ).join('')}
                    </ul>
                </div>
            `;

            // Display comparison charts
            const comparisonGrid = document.getElementById('comparisonGrid');
            comparisonGrid.innerHTML = `
                <div class="comparison-card">
                    <h3>Skills Density</h3>
                    <div class="comparison-bar">
                        <div class="comparison-bar-label">
                            <span>Current: ${analysis.skillsAnalysis.totalSkills} skills</span>
                            <span>Target: ${analysis.skillsAnalysis.expectedDensity}</span>
                        </div>
                        <div class="comparison-bar-visual">
                            <div class="comparison-bar-fill good" style="width: ${Math.min(100, analysis.skillsAnalysis.densityScore)}%"></div>
                        </div>
                    </div>
                </div>
                <div class="comparison-card">
                    <h3>Achievement Quantification</h3>
                    <div class="comparison-bar">
                        <div class="comparison-bar-label">
                            <span>Current: ${(analysis.achievementsAnalysis.quantificationRate * 100).toFixed(0)}%</span>
                            <span>Target: ${(analysis.achievementsAnalysis.expectedQuantificationRate * 100).toFixed(0)}%</span>
                        </div>
                        <div class="comparison-bar-visual">
                            <div class="comparison-bar-fill ${analysis.achievementsAnalysis.quantificationScore >= 80 ? 'excellent' : 'needs-improvement'}"
                                 style="width: ${analysis.achievementsAnalysis.quantificationScore}%"></div>
                        </div>
                    </div>
                </div>
            `;

            // Display recommendations
            const recommendationsList = document.getElementById('recommendationsList');
            recommendationsList.innerHTML = analysis.recommendations.map(rec => `
                <div class="recommendation-card priority-${rec.priority}">
                    <div class="recommendation-header">
                        <div class="recommendation-title">${rec.title}</div>
                        <span class="recommendation-priority ${rec.priority}">${rec.priority}</span>
                    </div>
                    <p class="recommendation-description">${rec.description}</p>
                    <p class="recommendation-impact">üìà Impact: ${rec.impact}</p>
                </div>
            `).join('');
        }

        function displaySkillsGapResults(gapAnalysis) {
            const gapSummary = document.getElementById('gapSummary');
            gapSummary.innerHTML = `
                <div class="gap-stat">
                    <div class="gap-stat-value">${gapAnalysis.critical.count}</div>
                    <div class="gap-stat-label">Critical Gaps</div>
                </div>
                <div class="gap-stat">
                    <div class="gap-stat-value">${gapAnalysis.valuable.count}</div>
                    <div class="gap-stat-label">Valuable Gaps</div>
                </div>
                <div class="gap-stat">
                    <div class="gap-stat-value">${gapAnalysis.transferable.count}</div>
                    <div class="gap-stat-label">Transferable Skills</div>
                </div>
                <div class="gap-stat">
                    <div class="gap-stat-value">${gapAnalysis.summary.readiness.level}</div>
                    <div class="gap-stat-label">Readiness</div>
                </div>
            `;

            const learningPathsList = document.getElementById('learningPathsList');
            learningPathsList.innerHTML = gapAnalysis.learningPaths.map(path => `
                <div class="learning-path">
                    <div class="learning-path-header">
                        <div class="learning-path-name">${path.name}</div>
                        <span class="learning-path-priority ${path.priority}">${path.priority}</span>
                    </div>
                    <div class="learning-path-timeline">‚è±Ô∏è Timeline: ${path.timeline}</div>
                    <div>
                        ${path.skills.map(skill => `
                            <div class="skill-to-learn">
                                <span class="skill-to-learn-name">${skill.skill}</span>
                                <span class="skill-to-learn-time">${skill.estimatedTime}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function displayCareerPathsResults(careerPaths) {
            const careerPathsList = document.getElementById('careerPathsList');
            careerPathsList.innerHTML = careerPaths.careerPaths.map(path => `
                <div class="career-path-card">
                    <div class="career-path-header">
                        <div class="career-path-title">${path.role}</div>
                        <div class="career-path-timeline">${path.timeline.formatted}</div>
                    </div>
                    <div class="career-path-details">
                        <div class="detail-box">
                            <div class="detail-label">Type</div>
                            <div class="detail-value">${path.type}</div>
                        </div>
                        <div class="detail-box">
                            <div class="detail-label">Difficulty</div>
                            <div class="detail-value">${path.difficulty}</div>
                        </div>
                        <div class="detail-box">
                            <div class="detail-label">Salary Range</div>
                            <div class="salary-range">
                                <span class="salary-amount">$${(path.salary.range.min / 1000).toFixed(0)}k</span>
                                <span>-</span>
                                <span class="salary-amount">$${(path.salary.range.max / 1000).toFixed(0)}k</span>
                            </div>
                        </div>
                    </div>
                    <div class="detail-box" style="margin-top: 1rem;">
                        <div class="detail-label">Skills to Acquire</div>
                        <div style="margin-top: 0.5rem;">
                            ${path.requiredSkills.needToAcquire.map(s =>
                                `<span style="display: inline-block; background: #e0e7ff; color: #4338ca; padding: 0.25rem 0.75rem; border-radius: 12px; margin: 0.25rem; font-size: 0.875rem;">${s}</span>`
                            ).join('')}
                        </div>
                    </div>
                    <div class="detail-box" style="margin-top: 1rem;">
                        <div class="detail-label">Action Steps</div>
                        <ol style="margin-top: 0.5rem; padding-left: 1.5rem;">
                            ${path.actionSteps.map(step =>
                                `<li style="margin-bottom: 0.5rem; color: #4b5563;">${step.action}: ${step.details} (${step.timeframe})</li>`
                            ).join('')}
                        </ol>
                    </div>
                </div>
            `).join('');
        }
    </script>
    <script src="js/navigation/loader.js"></script>
</body>
</html>
