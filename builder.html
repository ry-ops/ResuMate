<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResuMate Resume Builder</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/builder.css">
    <link rel="stylesheet" href="css/templates/selector.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            overflow: hidden;
        }

        #builder-root {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="builder-root" id="main-content" tabindex="-1"></div>

    <!-- Load all JavaScript modules -->
    <script src="js/state.js"></script>
    <script src="js/editor/sections.js"></script>
    <script src="js/editor/history.js"></script>
    <script src="js/editor/autosave.js"></script>
    <script src="js/editor/dragdrop.js"></script>
    <script src="js/templates/registry.js"></script>
    <script src="js/templates/engine.js"></script>
    <script src="js/templates/customizer.js"></script>
    <script src="js/templates/selector.js"></script>
    <script src="js/editor/builder.js"></script>

    <script>
        // Initialize the Resume Builder
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Initializing ResuMate Resume Builder...');

            // Get the container element
            const container = document.getElementById('builder-root');

            // Create builder instance
            const builder = new ResumeBuilder(container, {
                autoSaveInterval: 30000,      // 30 seconds
                maxHistoryStates: 50,         // 50 undo states
                enableDragDrop: true,         // Enable drag and drop
                enableAutoSave: true          // Enable auto-save
            });

            // Expose builder to window for debugging
            window.resumeBuilder = builder;

            console.log('ResuMate Resume Builder initialized successfully!');
            console.log('Available commands:');
            console.log('  - resumeBuilder.getState()     - Get current state');
            console.log('  - resumeBuilder.getHistory()   - Get history manager');
            console.log('  - resumeBuilder.getAutoSave()  - Get auto-save manager');
            console.log('  - resumeBuilder.getDragDrop()  - Get drag-drop manager');
            console.log('  - resumeBuilder.saveResume()   - Force save');
            console.log('  - resumeBuilder.exportResume() - Export to JSON');
        });

        // Keyboard shortcuts info
        window.addEventListener('load', () => {
            console.log('\nKeyboard Shortcuts:');
            console.log('  Cmd/Ctrl + Z       - Undo');
            console.log('  Cmd/Ctrl + Shift + Z - Redo');
            console.log('  Cmd/Ctrl + Y       - Redo (alternative)');
        });
    </script>
    <script src="js/navigation/loader.js"></script>
</body>
</html>
