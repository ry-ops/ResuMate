<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResuMate - Proofreading Suite Test</title>
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/proofread.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f3f4f6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .header p {
            color: #6b7280;
        }

        .test-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 24px;
        }

        .test-section h2 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 16px;
        }

        .sample-content {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .context-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .input-group label {
            font-size: 0.85rem;
            font-weight: 500;
            color: #374151;
        }

        .input-group input {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .status {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 16px;
            font-size: 0.9rem;
        }

        .status.info {
            background: #dbeafe;
            color: #1e40af;
        }

        .status.success {
            background: #d1fae5;
            color: #065f46;
        }

        .status.error {
            background: #fee2e2;
            color: #991b1b;
        }

        #results {
            margin-top: 24px;
        }
    </style>
</head>
<body id="main-content" tabindex="-1">
    <div class="container">
        <div class="header">
            <h1>ResuMate Proofreading Suite Test</h1>
            <p>Test comprehensive AI-powered proofreading, tone analysis, and consistency checking</p>
        </div>

        <div class="test-section">
            <h2>Sample Resume Content</h2>
            <div class="sample-content" id="sampleContent">I was responsible for helping the team with various tasks. I'm a hard worker and team player who thinks outside the box. Was tasked with managing projects and I worked on improving processes.

Led development of scalable microservices architecture that was deployed to AWS. I helped with code reviews and was involved in mentoring junior developers. Responsible for optimizing database queries which reduced response time.

TECHNICAL SKILLS
• Experienced with JavaScript, Python, Java
• Team player with strong communication skills
• Go-getter who delivers results

WORK EXPERIENCE
Software Engineer at Tech Corp (Jan 2020 - present)
- Helped with developing new features for the main application
- Was responsible for code reviews and testing
- Worked on improving team productivity

Senior Developer at StartupXYZ (June 2018 - Dec. 2019)
- Led team of 5 developers in building customer portal
- Reduced deployment time significantly through automation
- I implemented CI/CD pipeline using Jenkins</div>

            <div class="context-inputs">
                <div class="input-group">
                    <label for="industryInput">Target Industry</label>
                    <input type="text" id="industryInput" value="technology" placeholder="e.g., technology, finance">
                </div>
                <div class="input-group">
                    <label for="roleInput">Target Role</label>
                    <input type="text" id="roleInput" value="Senior Software Engineer" placeholder="e.g., Senior Software Engineer">
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="runProofreadTest()">
                    Run Full Analysis
                </button>
                <button class="btn btn-secondary" onclick="runProofreadOnly()">
                    Proofreading Only
                </button>
                <button class="btn btn-secondary" onclick="runToneOnly()">
                    Tone Analysis Only
                </button>
                <button class="btn btn-secondary" onclick="runConsistencyOnly()">
                    Consistency Only
                </button>
            </div>

            <div id="status"></div>
        </div>

        <div id="results"></div>
    </div>

    <!-- Load dependencies -->
    <script src="js/ai/prompts.js"></script>
    <script src="js/ai/generator.js"></script>
    <script src="js/ai/proofread.js"></script>
    <script src="js/ai/tone-analyzer.js"></script>
    <script src="js/ai/consistency.js"></script>
    <script src="js/ai/proofread-ui.js"></script>

    <script>
        // Test functions
        async function runProofreadTest() {
            const content = document.getElementById('sampleContent').textContent;
            const industry = document.getElementById('industryInput').value;
            const role = document.getElementById('roleInput').value;

            showStatus('Running full analysis...', 'info');

            try {
                const results = await proofreadUI.runFullAnalysis(content, {
                    industry: industry,
                    role: role
                });

                console.log('Full analysis results:', results);
                showStatus('Analysis complete!', 'success');

                proofreadUI.displayResults('results', results);
            } catch (error) {
                console.error('Error:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }

        async function runProofreadOnly() {
            const content = document.getElementById('sampleContent').textContent;
            showStatus('Running proofreading analysis...', 'info');

            try {
                const results = await proofreadEngine.proofread(content);
                console.log('Proofreading results:', results);

                const summary = proofreadEngine.getSummary(results);
                console.log('Summary:', summary);

                showStatus(`Proofreading complete! Found ${results.issues.length} issues. Overall score: ${results.scores.overall}/100`, 'success');

                displayProofreadResults(results);
            } catch (error) {
                console.error('Error:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }

        async function runToneOnly() {
            const content = document.getElementById('sampleContent').textContent;
            const industry = document.getElementById('industryInput').value;
            const role = document.getElementById('roleInput').value;

            showStatus('Running tone analysis...', 'info');

            try {
                const results = await toneAnalyzer.analyzeTone(content, {
                    industry: industry,
                    role: role
                });

                console.log('Tone analysis results:', results);

                const summary = toneAnalyzer.getSummary(results);
                console.log('Summary:', summary);

                showStatus(`Tone analysis complete! Detected tone: ${results.detectedTone.primary} (${results.detectedTone.confidence}% confidence). Consistency: ${results.toneConsistency}/100`, 'success');

                displayToneResults(results);
            } catch (error) {
                console.error('Error:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }

        async function runConsistencyOnly() {
            const content = document.getElementById('sampleContent').textContent;
            showStatus('Running consistency check...', 'info');

            try {
                const results = await consistencyChecker.checkConsistency(content);
                console.log('Consistency results:', results);

                const summary = consistencyChecker.getSummary(results);
                console.log('Summary:', summary);

                showStatus(`Consistency check complete! Found ${results.issues.length} issues. Overall score: ${results.scores.overall}/100`, 'success');

                displayConsistencyResults(results);
            } catch (error) {
                console.error('Error:', error);
                showStatus(`Error: ${error.message}`, 'error');
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
        }

        function displayProofreadResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="test-section">
                    <h2>Proofreading Results</h2>
                    <div class="polish-score-breakdown">
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Grammar</div>
                            <div class="polish-score-category-value">${results.scores.grammar}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Style</div>
                            <div class="polish-score-category-value">${results.scores.style}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Readability</div>
                            <div class="polish-score-category-value">${results.scores.readability}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Overall</div>
                            <div class="polish-score-category-value">${results.scores.overall}/100</div>
                        </div>
                    </div>
                    <h3 style="margin-top: 20px;">Issues (${results.issues.length})</h3>
                    <pre style="background: #f9fafb; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(results.issues, null, 2)}</pre>
                </div>
            `;
        }

        function displayToneResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="test-section">
                    <h2>Tone Analysis Results</h2>
                    <div class="polish-score-breakdown">
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Detected Tone</div>
                            <div class="polish-score-category-value">${results.detectedTone.primary}</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Confidence</div>
                            <div class="polish-score-category-value">${results.detectedTone.confidence}%</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Consistency</div>
                            <div class="polish-score-category-value">${results.toneConsistency}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Appropriate</div>
                            <div class="polish-score-category-value">${results.industryAppropriate ? 'Yes' : 'No'}</div>
                        </div>
                    </div>
                    <h3 style="margin-top: 20px;">Issues (${results.issues.length})</h3>
                    <pre style="background: #f9fafb; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(results.issues, null, 2)}</pre>
                    <h3 style="margin-top: 20px;">Recommendations (${results.recommendations.length})</h3>
                    <pre style="background: #f9fafb; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(results.recommendations, null, 2)}</pre>
                </div>
            `;
        }

        function displayConsistencyResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="test-section">
                    <h2>Consistency Check Results</h2>
                    <div class="polish-score-breakdown">
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Tense</div>
                            <div class="polish-score-category-value">${results.scores.tense}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Dates</div>
                            <div class="polish-score-category-value">${results.scores.dates}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Formatting</div>
                            <div class="polish-score-category-value">${results.scores.formatting}/100</div>
                        </div>
                        <div class="polish-score-category">
                            <div class="polish-score-category-name">Punctuation</div>
                            <div class="polish-score-category-value">${results.scores.punctuation}/100</div>
                        </div>
                    </div>
                    <h3 style="margin-top: 20px;">Issues (${results.issues.length})</h3>
                    <pre style="background: #f9fafb; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(results.issues, null, 2)}</pre>
                    <h3 style="margin-top: 20px;">Detected Patterns</h3>
                    <pre style="background: #f9fafb; padding: 16px; border-radius: 8px; overflow-x: auto;">${JSON.stringify(results.patterns, null, 2)}</pre>
                </div>
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Proofreading Suite Test loaded');
            console.log('Available modules:', {
                proofreadEngine: typeof proofreadEngine !== 'undefined',
                toneAnalyzer: typeof toneAnalyzer !== 'undefined',
                consistencyChecker: typeof consistencyChecker !== 'undefined',
                proofreadUI: typeof proofreadUI !== 'undefined'
            });
        });
    </script>
    <script src="js/navigation/loader.js"></script>
</body>
</html>
